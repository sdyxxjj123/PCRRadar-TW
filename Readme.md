# 注意
本程序仅直连PCR服务器，中间不发送任何数据到第三方服务器，且XML重新引继后即失效，其中不包含密码等数据
使用本程序需要模拟登录，因此会导致被顶号201，还请谨慎使用
本程序目前正在测试阶段，代码处于能用就行的水平，后续会慢慢优化（起码比贵族决斗的时候好多了）
# [下载 MUMU模拟器]
其他能ROOT的模拟器也可以，要求必须能Root，因为要获取XML文件

# [下载 PCR]
安装，登录，不需要下载资料，引继上即可

# [下载 RE文件管理器(全名Root Explorer)]
安装到模拟器里，先不用管

# 配置CONFIG.json
编辑proxy中的信息，为你本地代理软件的信息，预设为使用clash，如果是其他代理软件，或修改了clash的端口，请将7890改为你代理软件的端口
（若不需要，参考这样填写：
"proxy": {
 },
）
编辑ver版本为目前游戏的版本
编辑wait为适合你网络状况的数值（单位毫秒），若你使用的代理较慢，此数值可适当减小，此数值是为了防止请求过快而被Sonet Ban连接

# 提取XML文件
新建一个模拟器，不建议使用原有的，先不要开启ROOT权限，安装PCR，并登录帐号（引继成功即可，不需要下载数据登录进去）
## 以mumu模拟器为例
登录帐号后，在设定-其他中，开启root权限，然后开启Root Explorer，进入根目录，选择挂载为可读写
进入/data/data/tw/sonet.princessconnect/shared_prefs文件夹，找到tw.sonet.princessconnect.v2.playerprefs.xml
将其复制到mumu的分享文件夹中，在PC中开启该文件夹，并将文件复制到与程序同目录下

# 使用
确保程序同目录下，有​​EXE、config.json、tw.sonet.princessconnect.v2.playerprefs.xml后，开启程序，依照指引即可使用
注意：XML文件一般不会因为版本更新而失效，版本更新一般仅需修改config中的版本号

# 输出
执行的最后一个操作，信息会被输出到同目录下的output.txt或output.xlsx中

# 更新内容
## Ver1.5.0
1. 重写了骑士RANK等级相关，现在将转为使用数据表查询
## Ver1.4.1 & 1.4.2
1. 修正台四无法使用的问题
2. 修正文件被占用时程序闪退的问题
## Ver1.4.0
1. 优化输出文件占用时的储存方式
2. 输出文档进行自动格式化
3. 对部分错误的信息进行输出
## Ver1.3.1
1. 修正简体中文编码问题
2. 在网络环境一致的情况下，大幅提高了查询速度，并且可以自定义延迟时间
3. 对部分常见的错误增加了提示
## Ver1.3
1. 修正了查询竞技场时可能出现的报错
2. 追加查询公会内成员深域进度的功能~~懒狗杀手~~
## Ver1.2
1. 移除了昵称查询功能，现在被详细查询功能所取代，详细查询将可以将详尽的信息导出至Excel文件中
2. 公主竞技场排行榜查询时，可以一并导出胜场
## Ver1.1
1. 允许指定想要查询的排行榜长度，最大取得数据为10000名
2. 可以一次性输出双场战斗记录
3. 当查询排行榜小于100位时，允许同时查询输出名字
4. 修正了在名字中含有特殊字符时，程序无法正确输出到文档的问题
## Ver1.0
初始版本

## 常见错误代码
1. Code 204 : 版本号有误，请检查版本号是否和游戏最新一致
2. Code 501 ：Xml文件已失效，请重新获取（重新引继等都会导致Xml文件失效）
3. 获取完Xml文件后无法登录游戏 ：请关闭模拟器的Root权限
4. Code 205 : 资料存取错误，一般是Sonet服务器抽风，如果一直出现，可能是获取的数据有误
5. 登录失败，可能是版本号有误或网络环境配置不正确 ： 若无204提示，则大概率是代理设置有问题，请检查代理设置
其他错误：请反馈至作者QQ：944542670

#### 部分代码来自https://github.com/cc004/pcrjjc2 在此表示感谢

